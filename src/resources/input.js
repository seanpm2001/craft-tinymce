(()=>{"use strict";var e={144:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TinyMCEField=void 0;const i=n(311),o=(e,t={})=>{let n;return()=>{void 0===n?n=Craft.createElementSelectorModal(e,Object.assign({resizable:!0,multiSelect:!1,disableOnSelect:!0},t)):n.show()}};t.TinyMCEField=class{constructor(e,t={}){this._settings=e,console.log(this._settings);const n=this._init.bind(this),i=this._setup.bind(this),o=Object.assign({skin:"craft",plugins:"autoresize lists link image code",content_css:!1,menubar:!1,statusbar:!1,toolbar:"undo redo | blocks | bold italic strikethrough | bullist numlist | insertLink insertMedia | hr | code",allow_conditional_comments:!1,element_format:"html",fix_list_elements:!0,relative_urls:!1,remove_script_host:!1,anchor_top:!1,anchor_bottom:!1,autoresize_bottom_margin:0},t,{selector:`#${this._settings.id}`,language:this._settings.language,directionality:this._settings.direction,setup:i,init_instance_callback(e){n(e);const i=t.init_instance_callback;"function"==typeof i&&i.apply(this,arguments)}});tinymce.init(o).then((()=>{}),(()=>{}))}_commandHandleFromElementType(e){return e.split("\\").map(((e,t)=>(0===t?e[0]:e[0].toUpperCase())+e.slice(1).toLowerCase())).join("")}_setup(e){const t=[{type:"menuitem",text:Craft.t("tinymce","Insert/edit link"),onAction:()=>e.execCommand("mceLink")}],n=[{type:"menuitem",text:Craft.t("tinymce","Insert/edit image"),onAction:()=>e.execCommand("mceImage")}];for(const{elementType:n,optionTitle:i,sources:s}of this._settings.linkOptions){const r=this._commandHandleFromElementType(n),a=o(n,{sources:s,criteria:{locale:this._settings.locale},onSelect([t]){const n=e.selection.getContent(),i=`${t.url}#${r}:${t.id}`,o=t.label,s=null!=n?n:t.label,a=n.length>0?"mceReplaceContent":"mceInsertContent";e.execCommand(a,!1,`<a href="${i}" title="${o}">${s}</a>`)}});t.push({type:"menuitem",text:i,onAction:()=>a()})}e.ui.registry.addMenuButton("insertLink",{icon:"link",tooltip:Craft.t("tinymce","Link"),fetch:e=>e(t)});for(const{elementType:t,optionTitle:i,sources:s}of this._settings.mediaOptions){const r=this._commandHandleFromElementType(t),a=o(t,{sources:s,transforms:this._settings.transforms,storageKey:"RichTextFieldType.ChooseImage",criteria:{locale:this._settings.locale,kind:"image"},onSelect:([t],n=null)=>{const i=e.selection.getContent(),o=`${t.url}#${r}:${t.id}`+(null!==n?`:${n}`:""),s=t.label,a=i.length>0?"mceReplaceContent":"mceInsertContent";e.execCommand(a,!1,`<img src="${o}" alt="${s}" width="" height="">`)}});n.push({type:"menuitem",text:i,onAction:()=>a()})}e.ui.registry.addMenuButton("insertMedia",{icon:"image",tooltip:Craft.t("tinymce","Image"),fetch:e=>e(n)})}_init(e){const t=i(e.container),n=i(e.formElement);e.on("focus",(e=>t.addClass("mce-focused"))),e.on("blur",(e=>t.removeClass("mce-focused")));const o=n.data("elementEditor");new window.MutationObserver((()=>{i(e.targetElm).val(e.getContent());(o.isFullPage?Garnish.$bod:n).trigger("change")})).observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0}),e.addShortcut("meta+s","",(()=>Garnish.uiLayerManager.triggerShortcut(new KeyboardEvent("keydown",{shiftKey:!1,metaKey:!0,ctrlKey:!0,altKey:!1,keyCode:Garnish.S_KEY})))),e.addShortcut("shift+meta+s","",(()=>Garnish.uiLayerManager.triggerShortcut(new KeyboardEvent("keydown",{shiftKey:!0,metaKey:!0,ctrlKey:!0,altKey:!1,keyCode:Garnish.S_KEY}))))}}},311:e=>{e.exports=jQuery}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}(()=>{const e=n(144);window.initTinyMCE=t=>new e.TinyMCEField(t)})()})();
//# sourceMappingURL=input.js.map