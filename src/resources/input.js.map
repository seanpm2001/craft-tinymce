{"version":3,"file":"input.js","mappings":"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","sources":["webpack://craft-tinymce/webpack/bootstrap","webpack://craft-tinymce/webpack/runtime/compat get default export","webpack://craft-tinymce/webpack/runtime/define property getters","webpack://craft-tinymce/webpack/runtime/hasOwnProperty shorthand","webpack://craft-tinymce/external var \"jQuery\"","webpack://craft-tinymce/external var \"Craft\"","webpack://craft-tinymce/external var \"tinymce\"","webpack://craft-tinymce/./client/src/main.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","const __WEBPACK_NAMESPACE_OBJECT__ = Craft;","const __WEBPACK_NAMESPACE_OBJECT__ = tinymce;","import $ from 'jquery'\nimport Craft from 'craft'\nimport tinymce from 'tinymce'\n\nfunction showModalFactory(elementType, settings={})\n{\n\tlet modal\n\treturn function showModal()\n\t{\n\t\tif(!modal)\n\t\t{\n\t\t\tmodal = Craft.createElementSelectorModal(elementType, Object.assign({\n\t\t\t\tresizable: true,\n\t\t\t\tmultiSelect: false,\n\t\t\t\tdisableOnSelect: true,\n\t\t\t}, settings))\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmodal.show()\n\t\t}\n\t}\n}\n\nwindow.initTinyMCE = function(settings, editorConfig={})\n{\n\tconsole.log(settings)\n\tfunction setup(editor)\n\t{\n\t\tfor(let { elementType, optionTitle, sources } of settings.linkOptions)\n\t\t{\n\t\t\tconst elementTypeHandle = elementType.replace(/^\\w|_\\w/g, (match) => match.toLowerCase())\n\t\t\tconst command = elementTypeHandle + 'Link'\n\n\t\t\tconst showModal = showModalFactory(elementType, {\n\t\t\t\tsources,\n\t\t\t\tcriteria: { locale: settings.locale },\n\t\t\t\tonSelect([ element ])\n\t\t\t\t{\n\t\t\t\t\tconst selectedContent = editor.selection.getContent()\n\n\t\t\t\t\tconst url = `${element.url}#${elementTypeHandle}:${element.id}`\n\t\t\t\t\tconst title = element.label\n\t\t\t\t\tconst label = (selectedContent || element.label)\n\t\t\t\t\tconst command = (selectedContent ? 'mceReplaceContent' : 'mceInsertContent')\n\n\t\t\t\t\teditor.execCommand(command, false, `<a href=\"${url}\" title=\"${title}\">${label}</a>`)\n\t\t\t\t},\n\t\t\t})\n\n\t\t\teditor.addButton(command, {\n\t\t\t\ticon: 'link',\n\t\t\t\tstorageKey: 'tinymce.' + command,\n\t\t\t\ttooltip: optionTitle,\n\t\t\t\tonclick: () => showModal(),\n\t\t\t})\n\t\t}\n\n\t\tfor(let { elementType, optionTitle, sources } of settings.mediaOptions)\n\t\t{\n\t\t\tconst elementTypeHandle = elementType.replace(/^\\w|_\\w/g, (match) => match.toLowerCase())\n\t\t\tconst command = elementTypeHandle + 'Media'\n\n\t\t\tconst showModal = showModalFactory(elementType, {\n\t\t\t\tsources,\n\t\t\t\ttransforms: settings.transforms,\n\t\t\t\tstorageKey: 'RichTextFieldType.ChooseImage',\n\t\t\t\tcriteria: {\n\t\t\t\t\tlocale: settings.locale,\n\t\t\t\t\tkind: 'image',\n\t\t\t\t},\n\t\t\t\tonSelect([ element ], transform=null)\n\t\t\t\t{\n\t\t\t\t\tconst selectedContent = editor.selection.getContent()\n\n\t\t\t\t\tconst url = `${element.url}#${elementTypeHandle}:${element.id}` + (transform ? `:${transform}` : '')\n\t\t\t\t\tconst title = element.label\n\t\t\t\t\tconst width = ''\n\t\t\t\t\tconst height = ''\n\t\t\t\t\tconst command = (selectedContent ? 'mceReplaceContent' : 'mceInsertContent')\n\n\t\t\t\t\teditor.execCommand(command, false, `<img src=\"${url}\" alt=\"${title}\" width=\"${width}\" height=\"${height}\">`)\n\t\t\t\t},\n\t\t\t})\n\n\t\t\teditor.addButton(command, {\n\t\t\t\ticon: 'image',\n\t\t\t\tstorageKey: 'tinymce.' + command,\n\t\t\t\ttooltip: optionTitle,\n\t\t\t\tonclick: () => showModal(),\n\t\t\t})\n\t\t}\n\t}\n\n\tfunction init(editor)\n\t{\n\t\tconst $element = $(editor.container)\n\n\t\teditor.on('focus', e => $element.addClass('mce-focused'))\n\t\teditor.on('blur', e => $element.removeClass('mce-focused'))\n\t}\n\n\ttinymce.init(Object.assign(\n\t\t{\n\t\t\tskin: 'craft',\n\t\t\tplugins: 'autoresize hr lists link image code',\n\n\t\t\t// Toolbars\n\t\t\tmenubar: false,\n\t\t\tstatusbar: false,\n\t\t\ttoolbar: 'formatselect | bold italic strikethrough | bullist numlist | link entryLink assetLink | image assetMedia | hr | code',\n\n\t\t\t// Formatting\n\t\t\tallow_conditional_comments: false,\n\t\t\telement_format: 'html',\n\t\t\tfix_list_elements: true,\n\n\t\t\t// Links\n\t\t\trelative_urls: false,\n\t\t\tremove_script_host: false,\n\t\t\tanchor_top: false,\n\t\t\tanchor_bottom: false,\n\n\t\t\t// Auto-resize\n\t\t\tautoresize_bottom_margin: 0,\n\t\t},\n\t\teditorConfig,\n\t\t{\n\t\t\tselector: '#' + settings.id,\n\t\t\tlanguage: settings.language,\n\t\t\tdirectionality: settings.direction,\n\n\t\t\tsetup,\n\n\t\t\tinit_instance_callback(editor)\n\t\t\t{\n\t\t\t\tinit(editor)\n\t\t\t\t\n\t\t\t\tconst configInit = editorConfig.init_instance_callback\n\t\t\t\tif(typeof configInit === 'function')\n\t\t\t\t{\n\t\t\t\t\tconfigInit.apply(this, arguments)\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t))\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","jQuery","Craft","tinymce","showModalFactory","elementType","modal","settings","show","assign","resizable","multiSelect","disableOnSelect","window","initTinyMCE","editorConfig","setup","editor","optionTitle","sources","linkOptions","elementTypeHandle","replace","match","toLowerCase","command","showModal","criteria","locale","onSelect","element","selectedContent","selection","getContent","url","id","title","label","execCommand","addButton","icon","storageKey","tooltip","onclick","mediaOptions","transforms","kind","transform","init","$element","$","container","on","e","addClass","removeClass","console","log","skin","plugins","menubar","statusbar","toolbar","allow_conditional_comments","element_format","fix_list_elements","relative_urls","remove_script_host","anchor_top","anchor_bottom","autoresize_bottom_margin","selector","language","directionality","direction","init_instance_callback","configInit","apply","this","arguments"],"sourceRoot":""}